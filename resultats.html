<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FigueMania - Résultats</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .results-container {max-width: 980px; margin: 32px auto; padding: 20px;}
        .controls {display: flex; gap: 12px; flex-wrap: wrap; margin: 16px 0;}
        .controls input, .controls select, .controls button {
            padding: 8px 12px; border-radius: 6px; border: 1px solid #ccc;
        }
        .results-list {display: flex; flex-direction: column; gap: 10px;}
        .result {display: flex; align-items: center; justify-content: space-between;
                 padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: #fafafa;}
        .result .meta {flex: 1; margin-left: 12px;}
        .result .name {font-weight: bold;}
        .result .sub {font-size: 0.9em; color: #666;}
        aside {margin-top: 20px;}
        aside .summary {display: flex; flex-direction: column; gap: 8px;}
        aside .stat {display: flex; justify-content: space-between; padding: 8px;
                     border: 1px solid #ddd; border-radius: 6px; background: #f2f2f2;}
    </style>
</head>
<body>
    <header>
        <a href="index.html" class="logo">
            <img src="images/Logo_FigueMania.png" alt="FigueMania Logo">
        </a>
        <nav>
            <ul>
                <li><a href="index.html">Accueil</a></li>
                <li><a href="collection.html">Collection</a></li>
                <li><a href="roster.html">Roster</a></li>
                <li><a href="recrutement.html">Recrutement</a></li>
                <li><a href="resultats.html" class="active">Résultats</a></li>
            </ul>
        </nav>
    </header>

    <main class="results-container">
        <h2>Résultats des combats</h2>
        <div class="controls">
            <input type="text" id="search" placeholder="Rechercher un catcheur...">
            <select id="filter">
                <option value="all">Tous les groupes</option>
                <option value="A">Groupe A</option>
                <option value="B">Groupe B</option>
                <option value="C">Groupe C</option>
            </select>
            <button id="toggleSort">Trier : décroissant</button>
        </div>

        <section class="results-list" id="results">
            <!-- Les résultats seront injectés ici -->
        </section>

        <aside>
            <h3>Résumé</h3>
            <div class="summary">
                <div class="stat"><span>Participants :</span> <span id="count">—</span></div>
                <div class="stat"><span>Meilleur score :</span> <span id="best">—</span></div>
                <div class="stat"><span>Moyenne :</span> <span id="avg">—</span></div>
            </div>
        </aside>
    </main>

    <footer>
        © 2025 FigueMania
    </footer>

    <script>
        const sample = [
            {id:1, name:'Dupont Claire', group:'A', score:92, note:'Mention Très Bien'},
            {id:2, name:'Martin Hugo', group:'B', score:88, note:'Très bien'},
            {id:3, name:'Nguyen Lin', group:'A', score:74, note:'Bien'},
            {id:4, name:'Moreau Lea', group:'C', score:65, note:'Satisfaisant'},
            {id:5, name:'Garcia Omar', group:'B', score:81, note:'Bien'}
        ];

        let results = sample.slice();
        let sortDesc = true;

        const resultsEl = document.getElementById('results');
        const countEl = document.getElementById('count');
        const bestEl = document.getElementById('best');
        const avgEl = document.getElementById('avg');

        function render(list = results) {
            list = list.slice().sort((a,b)=> sortDesc ? b.score - a.score : a.score - b.score);
            resultsEl.innerHTML = '';
            list.forEach(item => {
                const node = document.createElement('div');
                node.className = 'result';
                node.innerHTML = `
                    <div class="badge">${item.group}</div>
                    <div class="meta">
                        <div class="name">${item.name}</div>
                        <div class="sub">${item.note} — Groupe ${item.group}</div>
                    </div>
                    <div class="score">${item.score}</div>
                `;
                resultsEl.appendChild(node);
            });

            countEl.textContent = list.length;
            if(list.length > 0){
                bestEl.textContent = list[0].score;
                const avg = (list.reduce((s,x)=>s+x.score,0)/list.length).toFixed(1);
                avgEl.textContent = avg;
            } else {
                bestEl.textContent = '-';
                avgEl.textContent = '-';
            }
        }

        document.getElementById('search').addEventListener('input', applyFilters);
        document.getElementById('filter').addEventListener('change', applyFilters);

        function applyFilters(){
            const q = document.getElementById('search').value.trim().toLowerCase();
            const f = document.getElementById('filter').value;
            let filtered = sample.filter(s => {
                const matchQ = !q || s.name.toLowerCase().includes(q) || (s.note && s.note.toLowerCase().includes(q));
                const matchF = (f==='all') || s.group===f;
                return matchQ && matchF;
            });
            results = filtered;
            render(results);
        }

        document.getElementById('toggleSort').addEventListener('click', ()=>{
            sortDesc = !sortDesc;
            document.getElementById('toggleSort').textContent = 'Trier : ' + (sortDesc ? 'décroissant' : 'croissant');
            render(results);
        });

        render();
    </script>
</body>
</html>

